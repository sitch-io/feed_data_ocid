language: python
sudo: required
python:
- '2.7'
services:
- docker
install:
- pip install opencellid~=1
script:
- export ISODATE=`date "+%Y-%m"`
- python ./get_opencellid_feed.py
- docker build -t ${IMAGE_REPOSITORY}:latest .
- docker tag ${IMAGE_REPOSITORY}:latest ${IMAGE_REPOSITORY}:${ISODATE}
after_success:
- docker login -u $DOCKERHUB_USER -p $DOCKERHUB_PASSWORD
- docker push ${IMAGE_REPOSITORY}:latest
- docker push ${IMAGE_REPOSITORY}:${ISODATE}
env:
  global:
  - secure: 2KkKNUVgPVugpRD2o6Gfj2uIreaid4yu1f88I2k+AQiQmYGZfe2rWaAFQt6/VlJ+uVS17SlSDe/rg1RNq0DRyLwRFtHu8sKF/mswYJw4ocXVmbhigb/S7jvCfSsquJKyl9otG4QFyrJaMViSh7RKpSr0ZnLBP8aBHWgnJqFFrslp4uwp/iD3iLk8KUnk9+LS3O/vCZmz5etzUGMMDMUo+fREjR9ZS1w+gWBX18Up2J2v81uTFYtisfqnrUq4HNrnt0hI4gsiu+a3e3B81TLofIuTVxpxj9aoLkLNErIsjddfSzs+JhYmGGbl+/SvC3/0rGQjTDaU1DDQvXwQGokGenW4H2ifMOIaaoTTN2yKE77FnslKk72Wm7HlH3wbV4V+7yL0dZTVU6P9JwsPRFB4T45WFT/9eI8DBxq4nl03NnvWnMIJ9NIn4qaMj9OPGBwJftnMKWkjy5CgrybhsjiZ6RBbtukMdrIDyi9myyJWlHYfsRXXV+qpaFRPIeh7CeXUJ39zl8u4fCjZ8A7UAd965yrMiEvBBMoo6+9OhSBeMiOnAQzTSFbxLg6wZI4b0c/epn//tbYMo87mCOfPez3vaScz0WCOyR0H4oAlmEfQLvDpALNMrpH8lb1yB41kCFdcSGWMOg3025R+3plgbuRwyayy0MiZzPCU6SN4KiyDmdY=
  - secure: ydG/TIpklvJ7oxpbDZiwmGvV8aiGCLsY7Vd2GMBWktz8Qg+zyRsWuAo3dG85ZAr5QuEHsSliUWF5w4rftY7b0HNRX1NAZ3BE84ayki8XG93Y7DbAYIfkAPAvsM3hb4XLldr3flU54qgFyNW60sjBYQI05QseDZvgXJzqRJ58/gaeNXmYCyWV8cLrYrsz8rJ24OrKOns7HqRLdWWecaI61EKU6rclJmV0Hih2YiJnW0orArt2PpYHWFwJ/1yTx69qaczSCzJ3rhF9cmjCX2oFgv8hh3J75BFX5dT+PYdYA94uX/c0+3QXdsmHc5wX+q0ZL3Orjwh3MH3KZdtENubLXpQa3qWkjG0BL+IvTHgWir73Y25cKfmyzcfXRqzqtvHENzPMUuM3FpqfOWIeyklR757bu4QzpgohhSJ5l6UbE4BXM4TV9MVNauFd5GbpJl5GtRFSioHdtFmIjAPKUpK6VAVA2Ji7fqbynObEiR+sNUHa6iANZdqqH+kujuXBdvGXWOfZC/ItdC/3vXVQ1mxVLqkijtGmDOFOu5kQHEPlFiXJslEPP0xAjPUSAi8mAskSKVYY/wYTHA18ZiCRwpHt9NHu0lWrwwcge9Bt1NSLwkQh9V0HvjLPJWg3BwsLykp5z2CfLboCTWkaiYy0YD1F0XT6r6exhP7Sp5seYs2pzgY=
  - secure: T06taPu0UkwV2rb4BeRgMxuSms4c7GuDDQsDx2uiwxdE+QK+2AS3rMT3a77z8EVCKszcHkfj6EH/s6QxMwHJAPClnkniM5bieQRVYyTTFfyamO19tgOHL3+dyJ2K5rLhVY+9l0f0b9x7mv9QdgvBOMks6f1j+TCj2iP7DDkqpK1a+S6EYaMbNdX+tHbgwDjCR5m2g3cW7IwJbAJMyqppi7vpdy3WIwTYG1jXvJfD//rUW+apILDTbmPa9X7eM4shW35qbr/1IB2fN7rtm8wcWsDb+sMbsQkB+1mS/kPRUYoWGbbhx5XMNAJTfbg+2gitaRdp185z0eu09a/phiJ4lDu7ZuJbKmNO0iwKvZiDjtd8FUS/vcHZe8hVdRXh/XoW8bFXhM1vXruOXnKfBLA1FUoOjgUkrLCX7czYPqAdXZT2UxTelODa7r+LY1fxNOP3dl6AYAAbOZqmRAh7iKcL0fu1X4U1KPrklp4pOq2U+5T2y/pxWehjXWB5iG8s27PbbaDNFXYubl9cNNABQNR5jtB5EsO5kNFanlc7MqicULEq5PxwG7c0OE+tIjmj3glUCE/OkJam4tL3WcMKp40CrCx2ejW7Q7dG8zXuah/jTnsWB8h+ubW4lM29HBIeE/r9HuujT1YxMHsg0NL23fDgKcX2zHVkNk8YIo0DqWgkfrQ=
  - secure: LyQxzlymudccNPL7mCBG5lOLHY7SVYjRk85VNIKQIXNOVTX0XgnRhYo+CLiyb4QUQ1JO1nApaOjVUoo6i8wqqFfOrITrR35cuvGR1vOu0w42iJmD7jAczPsM3i6DZpYyGv78UAqY39Bh9eydvnOBUBqzFhEVybjfobDd8bPLxH0Sil+QMbZ2xB+YrD2Q2Pigj0q/B/pkDNuxBUw9qAFpFIIrmqj4j+WEoRBIMztaWsxLngaZMWzCV9sJiqsNeLZNoRIQ3Dx4zIwMtBKYcPpkocXIhX+Y+vT2Bhp1JshC3Ln4ZIqSznqmjsqq/I/C8Hh7FvP911As1mjTMFDD8CgueU0EI45Cq+LbsTa8ntJUAFwAfJfVBVsmZReL7xkfakc+1VYgvy5vnUN8rrMo4OehE+IsGq4wLREazSwh8X+L89WPfDXA6OBaH/XwMjUc3zGRV03mQOiYv6SkdRcoFJBWu+4DJLWmHFz100lc80jZdjIyP6fI4glK4Kpp7kX57Jx7pxdSW0fHcnCd9QG5ZfjNgDAwEjT7RhrAg3oho+Z+lN4XXMwxK7uM0DSZhHWlZiCduafZHM5QOLFanEXmZ8ibhCKWiwCvrMDdrSYooplP2hKlk5k1jqT6ipP7vcgt27Hkz1gsnsKvk9a1NwQQtZabuqeBMngo7xsJPZ3A3SEhfYI=
